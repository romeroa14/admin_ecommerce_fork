name: Deploy to Hostinger (SSH)

on:
  push:
    branches: [ "main" ]

concurrency:
  group: production
  cancel-in-progress: true

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Deploy over SSH
        uses: appleboy/ssh-action@v1.2.0
        with:
          host: ${{ secrets.HOSTINGER_SSH_HOST }}
          username: ${{ secrets.HOSTINGER_SSH_USER }}
          key: ${{ secrets.HOSTINGER_SSH_KEY }}
          port: ${{ secrets.HOSTINGER_SSH_PORT }}
          script: |
            DOMAIN="blanchedalmond-giraffe-534725.hostingersite.com"
            DOMAIN_PATH=~/domains/$DOMAIN
            
            echo "=== Exploring domain: $DOMAIN ==="
            echo "Domain path: $DOMAIN_PATH"
            echo ""
            
            echo "=== Domain directory structure ==="
            ls -la $DOMAIN_PATH
            echo ""
            
            echo "=== Looking for public_html ==="
            if [ -d "$DOMAIN_PATH/public_html" ]; then
              echo "✓ Found public_html"
              ls -la $DOMAIN_PATH/public_html
            else
              echo "✗ public_html not found"
            fi
            echo ""
            
            echo "=== Looking for private_html ==="
            if [ -d "$DOMAIN_PATH/private_html" ]; then
              echo "✓ Found private_html"
              ls -la $DOMAIN_PATH/private_html
            else
              echo "✗ private_html not found"
            fi
            echo ""
            
            echo "=== Checking disk space ==="
            df -h $DOMAIN_PATH
